<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Static compilation of Makie · Makie.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Makie.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><span class="toctext">Basics</span><ul><li><a class="toctext" href="basic-tutorials.html">Tutorial</a></li><li><a class="toctext" href="statsmakie.html">StatsMakie Tutorial</a></li><li><a class="toctext" href="animation.html">Animation</a></li><li><a class="toctext" href="interaction.html">Interaction</a></li><li><a class="toctext" href="functions-overview.html">Plotting functions overview</a></li><li><a class="toctext" href="animation.html">Animation</a></li><li><a class="toctext" href="interaction.html">Interaction</a></li></ul></li><li><span class="toctext">Documentation</span><ul><li><a class="toctext" href="scenes.html">Scenes</a></li><li><a class="toctext" href="signatures.html">Plot function signatures</a></li><li><a class="toctext" href="plot-attributes.html">Plot attributes</a></li><li><a class="toctext" href="colors.html">Colors</a></li><li><a class="toctext" href="theming.html">Config file</a></li><li><a class="toctext" href="cameras.html">Cameras</a></li><li><a class="toctext" href="backends.html">Backends</a></li><li><a class="toctext" href="axis.html">Axis</a></li><li><a class="toctext" href="recipes.html">Plot Recipes</a></li><li><a class="toctext" href="output.html">Output</a></li><li><a class="toctext" href="troubleshooting.html">Troubleshooting</a></li></ul></li><li><span class="toctext">Developer Documentation</span><ul><li><a class="toctext" href="why-makie.html">Why <code>Makie</code>?</a></li><li><a class="toctext" href="devdocs.html">Devdocs</a></li><li><a class="toctext" href="gallery.html">MakieGallery</a></li><li><a class="toctext" href="abstractplotting_api.html">AbstractPlotting Reference</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="compilation.html">Static compilation of Makie</a></li></ul><a class="edit-page" href="https://github.com/JuliaPlots/MakieGallery.jl/blob/master/docs/src/compilation.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Static compilation of Makie</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Static-compilation-of-Makie-1" href="#Static-compilation-of-Makie-1">Static compilation of Makie</a></h1><h2><a class="nav-anchor" id="Compiling-into-system-image-1" href="#Compiling-into-system-image-1">Compiling into system image</a></h2><p>You can compile a binary for Makie and add it to your system image for fast plotting times with no JIT overhead, using <a href="https://github.com/JuliaLang/PackageCompiler.jl"><code>PackageCompiler.jl</code></a>.</p><p>To do that, you need to check out the additional packages for precompilation.  Then, you can build a system image using the <code>compile_incremental</code> method.</p><p>What this will do is generate a list of statements to compile using Makie&#39;s tests, which are stored in <code>test/runtests.jl</code>.  These tests are exhaustive and use most, if not all, of Makie&#39;s functionality.</p><p>To do the precompilation, you need only specify which packages you want to precompile, and <code>PackageCompiler</code> will do the rest.  First, make sure you have PackageCompiler:</p><pre><code class="language-julia"># add PackageCompiler
Pkg.add(&quot;PackageCompiler&quot;)
using PackageCompiler</code></pre><h3><a class="nav-anchor" id="The-&#39;safe&#39;-method-1" href="#The-&#39;safe&#39;-method-1">The &#39;safe&#39; method</a></h3><p>Using PackageCompiler is inherently risky, but the chances of it messing up your Julia install if you don&#39;t <code>force</code> are minimal.  The safe method outlined here will create a new system image in <code>PackageCompiler</code>&#39;sdirectory, which you can use with Julia by calling <code>julia --sysimage path/to/sysimg.so</code>.  You can also alias this command to something like <code>juliam</code> for ease of access.</p><pre><code class="language-julia">nso, cso = PackageCompiler.compile_incremental(:Makie, :AbstractPlotting, force = false) # can take around ~20 minutes
nso # path to new system image</code></pre><h3><a class="nav-anchor" id="The-&#39;risky&#39;-method-1" href="#The-&#39;risky&#39;-method-1">The &#39;risky&#39; method</a></h3><p>There is another approach, which will rewrite your current system image file.  This may brick your Julia install; to revert, consider doing <code>using PackageCompiler; PackageCompiler.revert()</code>.  However, note that this is not well tested and you may have to reinstall Julia.</p><pre><code class="language-julia"># Replaces Julia&#39;s system image
# please be very careful with the option below, since this can make your Julia stop working.

PackageCompiler.compile_incremental(:Makie, :AbstractPlotting, force = true)</code></pre><h2><a class="nav-anchor" id="After-precompilation-1" href="#After-precompilation-1">After precompilation</a></h2><p>Due to some issues around the precompilation of the display stack, you will have to call <code>AbstractPlotting.__init__()</code> after <code>using AbstractPlotting</code> to display plots.  Alternatively, you can do <code>display(AbstractPlotting.PlotDisplay(), scene);</code> on your <code>Scene</code> to get it to display in a plot window.</p><p>If you plan to modify or develop Makie, any changes you make to Makie will not propagate normally, since the functions are already in the system image.  You will have to, using Atom (the IDE), <code>eval</code> the changed files.</p><footer><hr/></footer></article></body></html>
